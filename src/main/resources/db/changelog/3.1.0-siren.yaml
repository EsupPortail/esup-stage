databaseChangeLog:
  - changeSet:
      id: 3.1.0-droit-service-contact-etab-accueil
      author: thouveno9
      changes:
        - sql:
            dbms: mysql
            sql: |
              INSERT INTO estage.AppFonction (codeAppFonction, libelleAppFonction)
              SELECT 'SERVICE_CONTACT_ACC', 'Paramétrage des services et contacts d''un établissement'
              WHERE NOT EXISTS (
                  SELECT 1 FROM estage.AppFonction WHERE libelleAppFonction = 'Paramétrage des services et contacts d''un établissement'
              );
  - changeSet:
      id: 3.1.0-ajout-temoin-siren
      author: thouveno9
      changes:
            - addColumn:
                columns:
                    - column:
                        name: temSiren
                        type: BOOLEAN
                        defaultValueBoolean: false
                tableName: Structure
  - changeSet:
      id: 3.1.0-ajout-code-statutjuridique
      author: thouveno9
      changes:
        - addColumn:
            columns:
              - column:
                  name: code
                  type: VARCHAR(20)
            tableName: StatutJuridique
        - sqlFile:
            path: 3.1.0-code-statut-juridique.sql
            relativeToChangelogFile: true
            encoding: utf8
  - changeSet:
      id: 3.1.0-ajout-historique_structure
      author: thouveno9
      changes:
        - createTable:
            tableName: historiqueStructure
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: structureId
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: utilisateurId
                  type: INT
                  constraints:
                    nullable: false
              - column:
                  name: operationType
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: operationDate
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: etatPrecedent
                  type: TEXT
              - column:
                  name: etatActuel
                  type: TEXT