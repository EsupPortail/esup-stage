<mat-card *ngIf="filters.length > 0" class="table-filters">
  <mat-card-content>
    <form>
      <div class="row">
        <ng-container *ngFor="let filter of filters">
          <mat-form-field class="col-md-3" appearance="fill" *ngIf="!filter.hidden">
            <mat-label>{{filter.libelle}}</mat-label>
            <ng-container [ngSwitch]="filter.type">
              <ng-container *ngSwitchCase="'boolean'">
                <mat-select [name]="filter.id" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()">
                  <mat-option></mat-option>
                  <mat-option [value]="true">Oui</mat-option>
                  <mat-option [value]="false">Non</mat-option>
                </mat-select>
              </ng-container>
              <ng-container *ngSwitchCase="'list'">
                <mat-select [name]="filter.id" multiple [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()">
                  <mat-option *ngFor="let option of filter.options" [value]="option[filter.keyId]">{{option[filter.keyLibelle]}}</mat-option>
                </mat-select>
              </ng-container>
              <ng-container *ngSwitchCase="'temEnServ'">
                <mat-select [name]="filter.id" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()">
                  <mat-option></mat-option>
                  <mat-option [value]="'O'">Oui</mat-option>
                  <mat-option [value]="'N'">Non</mat-option>
                </mat-select>
              </ng-container>
              <ng-container *ngSwitchCase="'date'">
                <input matInput [name]="filter.id" [matDatepicker]="datepicker" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()" />
              </ng-container>
              <ng-container *ngSwitchCase="'date-min'">
                <input matInput [name]="filter.id" [matDatepicker]="datepicker" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()" />
              </ng-container>
              <ng-container *ngSwitchCase="'date-max'">
                <input matInput [name]="filter.id" [matDatepicker]="datepicker" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()" />
              </ng-container>
              <ng-container *ngSwitchDefault>
                <input matInput [name]="filter.id" [(ngModel)]="filterValues[filter.id].value" (ngModelChange)="update()" />
              </ng-container>
            </ng-container>
            <mat-datepicker-toggle matSuffix [for]="datepicker" [style.display]="['date', 'date-min', 'date-max'].indexOf(filter.type) === -1 ? 'none' : ''"></mat-datepicker-toggle>
            <mat-datepicker #datepicker></mat-datepicker>
          </mat-form-field>
        </ng-container>
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <button type="button" mat-button mat-flat-button color="primary" *ngIf="actionButton" (click)="actionButton.action()">{{actionButton.libelle}}</button>
        </div>
        <div class="col-sm-12 col-md-6 text-right" [hidden]="hideDeleteFilters">
          <button mat-button mat-stroked-button (click)="reset()">Supprimer les filtres</button>
        </div>
      </div>
    </form>
  </mat-card-content>
</mat-card>

<mat-paginator *ngIf="pagination"
               [pageSizeOptions]="[10, 25, 50, 100]"
               [pageSize]="pageSize"
               [length]="total"
               [showFirstLastButtons]="true"
               (page)="changePaginator($event)"></mat-paginator>

<table mat-table [dataSource]="data" class="app-table">
  <ng-content></ng-content>

  <tr mat-header-row *matHeaderRowDef="columns"></tr>
  <tr mat-row *matRowDef="let row; columns: columns;" [class.selected]="isSelected(row)"></tr>

</table>

<mat-paginator *ngIf="pagination"
               [pageSizeOptions]="[10, 25, 50, 100]"
               [pageSize]="pageSize"
               [length]="total"
               [showFirstLastButtons]="true"
               (page)="changePaginator($event)"></mat-paginator>
