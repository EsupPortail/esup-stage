<div class="modal-overlay">
  <div class="modal-container">
    <!-- En-tête fixe -->
    <div class="header-banner">
      <h1 *ngIf="!interruptionStage">Ajouter des nouvelles périodes d'interruptions</h1>
      <h1 *ngIf="interruptionStage">Modifier une période d'interruption</h1>
    </div>

    <!-- Section d'ajout de période fixe -->
    <div class="add-period-section">
      <form [formGroup]="periodesForm" novalidate>
        <div class="row input-group">
          <mat-form-field class="col-9 date-range-field" appearance="fill">
            <mat-label *ngIf="!interruptionStage">Ajoutez une nouvelle période</mat-label>
            <mat-label *ngIf="interruptionStage">Nouvelle période</mat-label>
            <mat-date-range-input [dateFilter]="interruptionsDateFilter" [rangePicker]="interruptionsPicker">
              <input matStartDate formControlName="dateDebutInterruption" placeholder="Date de début">
              <input matEndDate formControlName="dateFinInterruption" placeholder="Date de fin">
            </mat-date-range-input>
            <mat-datepicker-toggle matSuffix [for]="interruptionsPicker"></mat-datepicker-toggle>
            <mat-date-range-picker #interruptionsPicker></mat-date-range-picker>
            <mat-error><app-form-error [field]="periodesForm.get('dateFinInterruption')"></app-form-error></mat-error>
          </mat-form-field>

          <button *ngIf="!interruptionStage" mat-fab type="button" class="add-button" matTooltip="Ajouter" (click)="addPeriode()">
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </form>
    </div>

    <!-- Contenu scrollable -->
    <div class="scrollable-content">
      <div *ngFor="let periode of periodes" class="periode-section">
        <div class="periode-dates">
          Période du {{ periode.dateDebutInterruption | date:'dd/MM/yyyy' }} au {{ periode.dateFinInterruption | date:'dd/MM/yyyy' }}
        </div>
        <button mat-fab color="warn" class="delete-button" matTooltip="Supprimer" (click)="removePeriode(periode)">
          <i class="fa fa-trash-alt"></i>
        </button>
      </div>
    </div>

    <!-- Footer fixe -->
    <div class="modal-footer">
      <button type="button" mat-stroked-button class="cancel-button" (click)="close()">
        {{'BOUTON_ANNULER'|contenu}}
      </button>
      <button mat-flat-button class="submit-button" (click)="save()" [disabled]="periodes.length === 0 && initialPeriodesLength === 0 && !interruptionStage">
        {{'BOUTON_VALIDER'|contenu}}
      </button>
    </div>
  </div>
</div>
